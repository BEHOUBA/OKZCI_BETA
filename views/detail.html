<!DOCTYPE html>
<html lang="fr">

<head>
    <title>{{ .ad.Title }}</title>
    <link rel="icon" href="img/icon-72x72.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/uikit.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
        crossorigin="anonymous">
    <meta name="google-signin-client_id" content="958526051973-n3qc7e0501vo4uvlll8gq3qcrrdq587b.apps.googleusercontent.com">
    <script src="/js/uikit.min.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/uikit-icons.min.js"></script>
</head>
<style>
    a:hover {
        text-decoration: none;
    }

    h3,
    p {
        margin: 8px auto;
    }

    #head-info a:hover {
        cursor: pointer;
    }

    #detail {
        max-width: 1200px;
        margin-right: auto;
        margin-left: auto;
        background: #fff;
    }

    .picture-nav {
        background-color: rgba(0, 0, 0, .09);
        padding: 10px;
        z-index: 2;
    }

    @media only screen and (min-width: 768px) {
        /* For desktop: */
        .mobile-profile {
            display: none;
        }
        #desktop-profile {
            display: block;
        }
        #head-info {
            padding-left: 20px;
            padding-right: 20px;
        }
        #content {
            max-width: 1200px;
            margin-right: auto;
            margin-left: auto;
        }
        #detail {
            max-width: 1200px;
            margin-right: auto;
            margin-left: auto;
        }

    }

    img {
        object-fit: cover;
    }

    @media only screen and (max-width: 768px) {
        /* For mobile: */
        .mobile-profile {
            display: block;
        }
        #desktop-profile {
            display: none;
        }
        #content {
            padding: 10px;
        }
    }

    .uk-navbar-container:not(.uk-navbar-transparent) {
        background: #ffff;
    }
</style>

<body>
    <!-- <div class="uk-position-center" id="detail-spinner">
        <img src="/img/logo.gif" />
    </div> -->
    <div id="detail" class="uk-box-shadow-small">
        <header style="margin-bottom: 10px">
            <div uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky; show-on-up: true;" class="uk-box-shadow-medium">
                <nav class="uk-navbar uk-navbar-container" uk-navbar uk-navbar="mode: click">
                    <div class="uk-navbar-left">
                        <a class="uk-navbar-toggle" onclick="goBack()">
                            <span uk-icon="icon: arrow-left; ratio: 1.5"></span>
                        </a>
                    </div>
                    <div class="uk-navbar-center">
                        <a class="uk-logo" href="/">
                            <img src="/img/logo-okz.png" width="100" height="30" alt="OKZ">
                        </a>
                    </div>
                    {{ if .user }}
                    <div class="uk-navbar-right mobile-profile" style="height: 65px;">
                        <a uk-toggle="target: #side-profile" class="uk-navbar-toggle">
                            <span class="uk-icon uk-icon-image uk-border-circle" style="background-image: url({{.user.Picture}}); width: 30px; height: 30px;background-size: cover;"></span>
                        </a>
                    </div>
                    {{ else }}
                    <div class="uk-navbar-right mobile-profile" style="height: 65px;">
                        <a href="/login" class="uk-navbar-toggle">
                            <span class="uk-icon uk-icon-image uk-border-circle" style="background-image: url(https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png); width: 30px; height: 30px;"></span>
                        </a>
                    </div>
                    {{ end }}
                    <!-- Desktop nav -->
                    <div class="uk-navbar-right" id="desktop-profile">
                        <ul class="uk-navbar-nav">
                            <li>
                                {{ if .user }}
                                <a href="#">
                                    <span class="uk-icon uk-icon-image uk-border-circle" style="background-image: url({{.user.Picture}}); width: 40px; height: 40px; background-size: cover;"></span>
                                </a>
                                <div class="uk-navbar-dropdown">
                                    <ul class="uk-nav uk-navbar-dropdown-nav">
                                        <li>
                                            <a href="/me">Profile</a>
                                        </li>
                                        <li>
                                            <a href="/settings">Reglages</a>
                                        </li>
                                        <li>
                                            <a href="/logout">Deconnexion</a>
                                        </li>
                                    </ul>
                                </div>
                                {{ else }}
                                <a href="/login" class="uk-navbar-toggle">
                                    <span class="uk-icon uk-icon-image uk-border-circle" style="background-image: url(https://cdn2.iconfinder.com/data/icons/ios-7-icons/50/user_male2-512.png); width: 40px; height: 40px;"></span>
                                </a>
                                {{ end }}
                            </li>
                        </ul>
                    </div>
                </nav>
                </nav>
            </div>
        </header>
        <div id="content" uk-grid class="uk-margin-medium-top">
            <div id="img-carousel" class="uk-width-1-1 uk-width-2-3@m">
                <div uk-slideshow="animation: push; min-height: 250;">
                    <div class="uk-position-relative uk-visible-toggle uk-light">
                        <ul class="uk-slideshow-items">
                            {{ range .ad.Pictures }}
                            <li>
                                <img src="{{.}}" alt="Image" uk-cover>
                            </li>
                            {{ end }}
                        </ul>
                        <div class="uk-position-bottom uk-position-small  uk-position-small">
                            <div uk-lightbox uk-lightbox="animation: fade">
                                {{ range $i, $img := .ad.Pictures }} {{ if eq $i 0}}
                                <a uk-icon="expand" href="{{$img}}" data-type="image" class="picture-nav"></a>
                                {{ else }}
                                <a href="{{$img}}" data-type="image"></a>
                                {{ end }} {{ end }}
                            </div>
                        </div>
                        <a class="uk-position-center-left uk-position-small uk-hidden-hover picture-nav" href="#" uk-slidenav-previous uk-slideshow-item="previous"></a>
                        <a class="uk-position-center-right uk-position-small uk-hidden-hover picture-nav" href="#" uk-slidenav-next uk-slideshow-item="next"></a>
                    </div>
                </div>
            </div>
            <!-- <div style="margin: 20px 10px"> -->
            <div id="head-info" class="uk-width-1-1 uk-width-1-3@m uk-margin-auto">
                <div>
                    <div style="display: inline">
                        <h2 class="uk-text-bold">{{ .ad.Title }}</h2>
                        <a class="uk-align-right favorites" onclick="addToFavorites({{.ad.ShortID}})">
                            <!-- <i class="fas fa-star" id="isFav"></i> -->
                            {{ if .isFav}}
                            <i class="fas fa-star" id="fav"></i>
                            {{ else }}
                            <i class="far fa-star" id="fav"></i>
                            {{ end }}
                        </a>
                    </div>
                    {{ if .ad.Price }}
                    <p id="ad-price">{{ .ad.Price }} FCFA</p>
                    {{ else }}
                    <br> {{ end }}

                </div>
                <hr>
                <div id="contact-box">
                    <div class="uk-child-width-expand@ uk-child-width-1-2" uk-grid>
                        <div>
                            <a href="#contact-modal" class="uk-button uk-button-primary uk-width-1-1" uk-toggle>Appeler</a>
                        </div>
                        <div id="contact-modal" uk-modal>
                            <div class="uk-modal-dialog" style="min-height: 100%;">
                                <button class="uk-modal-close-full uk-close-large" type="button" uk-close></button>
                                <div class="uk-grid-collapse uk-child-width-1-1@s uk-flex-middle" uk-grid>
                                    <div class="uk-padding-small uk-text-center">
                                        <div class="uk-margin-auto">
                                            <div class="uk-margin-large-top">
                                                <img src="{{ .owner.Picture }}" style="height: 150px;width: 150px" class="uk-border-circle" alt="">
                                                <p class="uk-text-bold">{{ .owner.UserName }}</p>
                                            </div>
                                        </div>
                                        <h3>+225 {{ .ad.Contact }}</h3>
                                        <small>Attention ! Afin d'eviter tous desagrements ou arnaques evitez d'effectuer l'achat
                                            dans une zone dangereuse et à des heures tardives, evitez d'effectuer l'achat
                                            en ligne sans avoir au prélable vu le produit réelement, evitez tout achat avec
                                            une personne d'apparence douteuse ou n'ayant pas toutes ses facultés, evitez
                                            les paiements par transfert d'argent qui vous seront proposés.</small>
                                        <div class="uk-width-1-1 uk-margin">
                                            <button class="uk-button uk-button-default uk-modal-close" uk-dis>ANNULER</button>
                                            <a href="tel:+225{{ .ad.Contact }}" class="uk-button uk-button-primary">APPELER</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <a href="#message-modal" class="uk-button uk-button-primary uk-width-1-1" uk-toggle>Ecrire</a>
                        </div>
                        <div id="message-modal" class="uk-flex-top" uk-modal>
                            <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
                                <button class="uk-modal-close-default" type="button" uk-close></button>
                                <div class="uk-grid-collapse uk-child-width-1-1@s" uk-grid>
                                    <div class="uk-text-center">
                                        <div class="uk-margin-medium-top">
                                            <textarea class="uk-textarea" rows="6" placeholder="Votre message pour {{.owner.UserName}}" id="message-body"></textarea>
                                        </div>
                                        <div class="uk-width-1-1 uk-margin-medium-top">
                                            <a class="uk-button uk-button-primary uk-width-1-1" onclick="sendMessageTo({{.owner.Email}}, {{ .owner.UserName }})">ENVOYER</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div id="address-map" class="uk-margin-top uk-width-1-1 uk-margin" uk-grid>
                    <div class="uk-width-1-2">
                        <p class="uk-align-left">{{ .ad.City }}</p>
                    </div>
                    <div class="uk-width-expand">
                        <!-- <p class="uk-align-right">{{ .ad.City}}</p> -->
                    </div>
                </div>
                <hr>
                <div id="advertiser" class="uk-margin" uk-grid>
                    <small>Mis en ligne par: </small>
                    <div class="uk-width-1-1  uk-inline">
                        <img class="uk-border-circle" style="width: 40px; height: 40px; margin-right: 10px;" src="{{ .owner.Picture }}">
                        <span>{{ .owner.UserName }}</span>
                    </div>
                </div>
            </div>
            <!-- grid end-->

            <div class="uk-width-1-1 uk-width-2-3@m">
                <hr>
                <div id="description" uk-grid class="uk-margin">
                    <p class="uk-text-large uk-text-bold uk-width-1-1">Details</p>
                    <p class="uk-width-1-1">{{ .ad.Details }}</p>
                </div>
                <hr>
                <div id="social" uk-grid class="uk-margin">
                    <p class="uk-text-primary uk-text-center uk-width-1-1">Partager cette annonce</p>
                    <div class="uk-text-center uk-width-1-1">
                        <a class="uk-icon-button uk-margin-small-right" style="color:#3B5998" href="http://www.facebook.com/sharer.php?u=https://google.com&src=sp"
                            target="blank" uk-icon="facebook"></a>
                        <a class="uk-icon-button uk-margin-small-right twitter-share-button" style="color: #1dcaff" href="https://twitter.com/intent/tweet?text=http://localhost:8080/watch?a={{ .ad.ShortID }}"
                            uk-icon="twitter"></a>
                        <a onclick="whatsAppShare()" class="uk-icon-button uk-margin-small-right" style="color: #25d366" uk-icon="whatsapp"></a>
                    </div>
                    <p class="uk-align-center uk-text-small">
                        <a class="uk-text-danger" href="#report-modal" uk-toggle>Signaler cette annonce</a>
                    </p>
                    <div id="report-modal" class="uk-flex-top" uk-modal>
                        <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">

                            <button class="uk-modal-close-default" type="button" uk-close></button>
                            <div class="uk-grid-collapse uk-child-width-1-1@s uk-flex-middle" uk-grid>
                                <div class="uk-text-center">
                                    <div class="uk-margin-medium-top">
                                        <textarea class="uk-textarea" rows="6" placeholder="Dites nous s'il vous plait ce qui ne vas pas avec cette annonce" id="report-body"></textarea>
                                    </div>
                                    <div class="uk-width-1-1 uk-margin-medium-top">
                                        <a class="uk-button uk-button-danger uk-width-1-1" onclick="sendReportMessage({{ .ad.ShortID }})">
                                            Signaler l'annonce
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <small style="font-size: 11px" class="uk-text-muted">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Vero fugiat, omnis maiores ad eaque dolorem
                        accusantium non doloribus at corporis iste officiis incidunt quo minus amet commodi natus, maxime
                        doloremque.
                    </small>
                </div>
            </div>

            <!-- right side -->
            {{ if .user}}
            <div id="side-profile" uk-offcanvas="flip: true; overlay: true">
                <div class="uk-offcanvas-bar">
                    <ul class="uk-nav uk-nav-default uk-text-bold uk-margin-top">
                        <li class="uk-nav-header uk-text-center">
                            <div class="dashboard-profil">
                                <img data-src="{{ .user.Picture }}" alt="" uk-img style="min-height: 100%">
                            </div>
                        </li>
                        <li class="uk-nav-header uk-text-center uk-margin">{{ .user.UserName }}</li>
                        <li class="uk-nav-divider"></li>
                        <li>
                            <a href="/me">
                                <span class="uk-icon uk-icon-image uk-margin-small-right" style="background-image: url('icons/avatar.svg');"></span>
                                Profil</a>
                        </li>
                        <li class="uk-nav-divider"></li>
                        <li>
                            <a href="/settings">
                                <span class="uk-icon uk-icon-image uk-margin-small-right" style="background-image: url('icons/controls.svg');"></span>
                                Reglages</a>
                        </li>
                        <li class="uk-nav-divider"></li>
                        <li>
                            <a onclick="logout()">
                                <span class="uk-icon uk-icon-image uk-margin-small-right" style="background-image: url('icons/logout.svg');"></span>
                                Deconnecter</a>
                        </li>
                    </ul>
                </div>
            </div>
            {{ end }}
        </div>
        <footer class="uk-padding-small">
            <hr>
            <div class="uk-grid uk-grid-default uk-grid-small" uk-grid style="font-size: 13px;">
                <div class="uk-width-1-1 uk-width-1-5@m uk-align-left">
                    © 2018 OKAZION version beta 0.01
                </div>
                <div class="uk-width-1-1 uk-width-1-5@m uk-align-left">
                    <a href="/conditions">
                        Regles et les conditions d'utilisations
                    </a>
                </div>
                <div class="uk-width-1-1 uk-width-1-5@m uk-align-left">
                    <a href="/about-us">
                        Contactez - nous
                    </a>
                </div>
            </div>
        </footer>
        </section>
    </div>
    <!--end vue container -->
    <div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function () {
            FB.init({
                appId: '157821501758780',
                autoLogAppEvents: true,
                xfbml: true,
                version: 'v3.0'
            });
        };

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement(s);
            js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
</body>
<script src="/js/details.js"></script>
<script src="https://apis.google.com/js/platform.js?onload=onLoad" async defer></script>

</html>